########################################################################################################################
#
# Library: QExt
#
# Copyright (C) 2021~Present ChengXueWen. Contact: 1398831004@qq.com.
#
# License: MIT License
#
# Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
# documentation files (the "Software"), to deal in the Software without restriction, including without limitation
# the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and
# to permit persons to whom the Software is furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in all copies or substantial portions
# of the Software.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
# WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE  AUTHORS
# OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
# OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
#
########################################################################################################################


#-----------------------------------------------------------------------------------------------------------------------
# Add lib link libraries
#-----------------------------------------------------------------------------------------------------------------------
set(QEXT_LIB_LINK_LIBRARIES)

if(QEXT_QT_VERSION_MAJOR EQUAL 4)
    list(APPEND QEXT_LIB_LINK_LIBRARIES Qt4::QtCore Qt4::QtGui)
elseif(QEXT_QT_VERSION_MAJOR GREATER 4)
    list(APPEND QEXT_LIB_LINK_LIBRARIES
        Qt${QEXT_QT_VERSION_MAJOR}::Core
        Qt${QEXT_QT_VERSION_MAJOR}::Gui
        Qt${QEXT_QT_VERSION_MAJOR}::Widgets)
else()
    message(FATAL_ERROR "Not find Qt package")
endif()

list(APPEND QEXT_LIB_LINK_LIBRARIES QExt::Core)


#-----------------------------------------------------------------------------------------------------------------------
# Add lib target
#-----------------------------------------------------------------------------------------------------------------------
qext_add_library(Mvvm
    EXCEPTIONS
    SOURCES
    source/model/commands/qextMvvmAbstractItemCommand.cpp
    source/model/commands/qextMvvmAbstractItemCommand.h
    source/model/commands/qextMvvmCommandAdapter.cpp
    source/model/commands/qextMvvmCommandAdapter.h
    source/model/commands/qextMvvmCommandResult.h
    source/model/commands/qextMvvmCommandService.cpp
    source/model/commands/qextMvvmCommandService.h
    source/model/commands/qextMvvmCommandUtils.cpp
    source/model/commands/qextMvvmCommandUtils.h
    source/model/commands/qextMvvmCommands.cpp
    source/model/commands/qextMvvmCommands.h
    source/model/commands/qextMvvmUndoStack.cpp
    source/model/commands/qextMvvmUndoStack.h
    source/model/core/qextMvvmFilesystem.h
    source/model/core/qextMvvmTypes.h
    source/model/core/qextMvvmUniqueId.cpp
    source/model/core/qextMvvmUniqueId.h
    source/model/core/qextMvvmVersion.h
    source/model/factories/qextMvvmItemCatalogueFactory.cpp
    source/model/factories/qextMvvmItemCatalogueFactory.h
    source/model/factories/qextMvvmItemConverterFactory.cpp
    source/model/factories/qextMvvmItemConverterFactory.h
    source/model/factories/qextMvvmModelConverterFactory.cpp
    source/model/factories/qextMvvmModelConverterFactory.h
    source/model/factories/qextMvvmModelDocumentFactory.cpp
    source/model/factories/qextMvvmModelDocumentFactory.h
    source/model/factories/qextMvvmProjectManagerFactory.cpp
    source/model/factories/qextMvvmProjectManagerFactory.h
    source/model/interfaces/qextMvvmApplicationModelsInterface.h
    source/model/interfaces/qextMvvmItemBackupStrategy.h
    source/model/interfaces/qextMvvmitemCopyStrategy.h
    source/model/interfaces/qextMvvmItemFactoryInterface.h
    source/model/interfaces/qextMvvmItemListenerInterface.h
    source/model/interfaces/qextMvvmModelDocumentInterface.h
    source/model/interfaces/qextMvvmModelListenerInterface.h
    source/model/interfaces/qextMvvmProjectInterface.h
    source/model/interfaces/qextMvvmProjectManagerInterface.h
    source/model/interfaces/qextMvvmUndoStackInterface.h
    source/model/qextMvvmComboProperty.cpp
    source/model/qextMvvmComboProperty.h
    source/model/qextMvvmComparators.cpp
    source/model/qextMvvmComparators.h
    source/model/qextMvvmCompoundItem.cpp
    source/model/qextMvvmCompoundItem.h
    source/model/qextMvvmCustomVariants.cpp
    source/model/qextMvvmCustomVariants.h
    source/model/qextMvvmDataRole.cpp
    source/model/qextMvvmDataRole.h
    source/model/qextMvvmExternalProperty.cpp
    source/model/qextMvvmExternalProperty.h
    source/model/qextMvvmFunctionTypes.h
    source/model/qextMvvmGroupItem.cpp
    source/model/qextMvvmGroupItem.h
    source/model/qextMvvmItemCatalogue.cpp
    source/model/qextMvvmItemCatalogue.h
    source/model/qextMvvmItemFactory.cpp
    source/model/qextMvvmItemFactory.h
    source/model/qextMvvmItemManager.cpp
    source/model/qextMvvmItemManager.h
    source/model/qextMvvmItemPool.cpp
    source/model/qextMvvmItemPool.h
    source/model/qextMvvmItemUtils.cpp
    source/model/qextMvvmItemUtils.h
    source/model/qextMvvmModelUtils.cpp
    source/model/qextMvvmModelUtils.h
    source/model/qextMvvmPath.cpp
    source/model/qextMvvmPath.h
    source/model/qextMvvmPropertyItem.cpp
    source/model/qextMvvmPropertyItem.h
    source/model/qextMvvmSessionItem.cpp
    source/model/qextMvvmSessionItem.h
    source/model/qextMvvmSessionItemContainer.cpp
    source/model/qextMvvmSessionItemContainer.h
    source/model/qextMvvmSessionItemData.cpp
    source/model/qextMvvmSessionItemData.h
    source/model/qextMvvmSessionItemTags.cpp
    source/model/qextMvvmSessionItemTags.h
    source/model/qextMvvmSessionModel.cpp
    source/model/qextMvvmSessionModel.h
    source/model/qextMvvmTagInfo.cpp
    source/model/qextMvvmTagInfo.h
    source/model/qextMvvmTagRow.cpp
    source/model/qextMvvmTagRow.h
    source/model/qextMvvmVariantConstants.h
    source/model/project/qextMvvmModelHasChangedController.cpp
    source/model/project/qextMvvmModelHasChangedController.h
    source/model/project/qextMvvmProject.cpp
    source/model/project/qextMvvmProject.h
    source/model/project/qextMvvmProjectTypes.h
    source/model/project/qextMvvmProjectChangeController.cpp
    source/model/project/qextMvvmProjectChangeController.h
    source/model/project/qextMvvmProjectManager.cpp
    source/model/project/qextMvvmProjectManager.h
    source/model/project/qextMvvmProjectManagerDecorator.cpp
    source/model/project/qextMvvmProjectManagerDecorator.h
    source/model/project/qextMvvmProjectUtils.cpp
    source/model/project/qextMvvmProjectUtils.h
    source/model/serialization/qextMvvmCompatibilityUtils.cpp
    source/model/serialization/qextMvvmCompatibilityUtils.h
    source/model/serialization/qextMvvmJsonConverterInterfaces.h
    source/model/serialization/qextMvvmJsonDocument.cpp
    source/model/serialization/qextMvvmJsonDocument.h
    source/model/serialization/qextMvvmJsonItemTypes.h
    source/model/serialization/qextMvvmJsonItemBackupStrategy.cpp
    source/model/serialization/qextMvvmJsonItemBackupStrategy.h
    source/model/serialization/qextMvvmJsonItemContainerConverter.cpp
    source/model/serialization/qextMvvmJsonItemContainerConverter.h
    source/model/serialization/qextMvvmJsonItemConverter.cpp
    source/model/serialization/qextMvvmJsonItemConverter.h
    source/model/serialization/qextMvvmJsonItemConverterInterface.h
    source/model/serialization/qextMvvmJsonItemCopyStrategy.cpp
    source/model/serialization/qextMvvmJsonItemCopyStrategy.h
    source/model/serialization/qextMvvmJsonItemDataConverter.cpp
    source/model/serialization/qextMvvmJsonItemDataConverter.h
    source/model/serialization/qextMvvmJsonItemDataConverterInterface.h
    source/model/serialization/qextMvvmJsonItemFormatAssistant.cpp
    source/model/serialization/qextMvvmJsonItemFormatAssistant.h
    source/model/serialization/qextMvvmJsonItemTagsConverter.cpp
    source/model/serialization/qextMvvmJsonItemTagsConverter.h
    source/model/serialization/qextMvvmJsonModelConverter.cpp
    source/model/serialization/qextMvvmJsonModelConverter.h
    source/model/serialization/qextMvvmJsonModelConverterinterface.h
    source/model/serialization/qextMvvmJsonTagInfoConverter.cpp
    source/model/serialization/qextMvvmJsonTagInfoConverter.h
    source/model/serialization/qextMvvmJsonTagInfoConverterInterface.h
    source/model/serialization/qextMvvmJsonUtils.cpp
    source/model/serialization/qextMvvmJsonUtils.h
    source/model/serialization/qextMvvmJsonVariantConverter.cpp
    source/model/serialization/qextMvvmJsonVariantConverter.h
    source/model/serialization/qextMvvmJsonVariantConverterInterface.h
    source/model/signals/qextMvvmCallbackTypes.h
    source/model/signals/qextMvvmCallbackContainer.h
    source/model/signals/qextMvvmItemListener.h
    source/model/signals/qextMvvmItemListenerBase.cpp
    source/model/signals/qextMvvmItemListenerBase.h
    source/model/signals/qextMvvmItemMapper.cpp
    source/model/signals/qextMvvmItemMapper.h
    source/model/signals/qextMvvmModelListener.h
    source/model/signals/qextMvvmModelListenerBase.cpp
    source/model/signals/qextMvvmModelListenerBase.h
    source/model/signals/qextMvvmModelMapper.cpp
    source/model/signals/qextMvvmModelMapper.h
    source/model/standarditems/qextMvvmAxisItems.cpp
    source/model/standarditems/qextMvvmAxisItems.h
    source/model/standarditems/qextMvvmColorMapItem.cpp
    source/model/standarditems/qextMvvmColorMapItem.h
    source/model/standarditems/qextMvvmColorMapViewPortItem.cpp
    source/model/standarditems/qextMvvmColorMapViewPortItem.h
    source/model/standarditems/qextMvvmContainerItem.cpp
    source/model/standarditems/qextMvvmContainerItem.h
    source/model/standarditems/qextMvvmData1DItem.cpp
    source/model/standarditems/qextMvvmData1DItem.h
    source/model/standarditems/qextMvvmData2DItem.cpp
    source/model/standarditems/qextMvvmData2DItem.h
    source/model/standarditems/qextMvvmGraphItem.cpp
    source/model/standarditems/qextMvvmGraphItem.h
    source/model/standarditems/qextMvvmGraphViewPortItem.cpp
    source/model/standarditems/qextMvvmGraphViewPortItem.h
    source/model/standarditems/qextMvvmLinkedItem.cpp
    source/model/standarditems/qextMvvmLinkedItem.h
    source/model/standarditems/qextMvvmPlotTableItems.cpp
    source/model/standarditems/qextMvvmPlotTableItems.h
    source/model/standarditems/qextMvvmStandardItemIncludes.h
    source/model/standarditems/qextMvvmVectorItem.cpp
    source/model/standarditems/qextMvvmVectorItem.h
    source/model/standarditems/qextMvvmViewPortItem.cpp
    source/model/standarditems/qextMvvmViewPortItem.h
    source/model/utils/qextMvvmBinUtils.cpp
    source/model/utils/qextMvvmBinUtils.h
    source/model/utils/qextMvvmContainerUtils.cpp
    source/model/utils/qextMvvmContainerUtils.h
    source/model/utils/qextMvvmFileUtils.cpp
    source/model/utils/qextMvvmFileUtils.h
    source/model/utils/qextMvvmIFactory.h
    source/model/utils/qextMvvmMathConstants.h
    source/model/utils/qextMvvmNumericUtils.cpp
    source/model/utils/qextMvvmNumericUtils.h
    source/model/utils/qextMvvmProgressHandler.cpp
    source/model/utils/qextMvvmProgressHandler.h
    source/model/utils/qextMvvmRealLimits.cpp
    source/model/utils/qextMvvmRealLimits.h
    source/model/utils/qextMvvmStringUtils.cpp
    source/model/utils/qextMvvmStringUtils.h
    source/model/utils/qextMvvmThreadSafeStack.h
    source/view/plotting/qextMvvmAxisTitleController.cpp
    source/view/plotting/qextMvvmAxisTitleController.h
    source/view/plotting/qextMvvmColorMapCanvas.cpp
    source/view/plotting/qextMvvmColorMapCanvas.h
    source/view/plotting/qextMvvmColorMapInfoFormatter.cpp
    source/view/plotting/qextMvvmColorMapInfoFormatter.h
    source/view/plotting/qextMvvmColorMapPlotController.cpp
    source/view/plotting/qextMvvmColorMapPlotController.h
    source/view/plotting/qextMvvmColorMapViewPortPlotController.cpp
    source/view/plotting/qextMvvmColorMapViewPortPlotController.h
    source/view/plotting/qextMvvmColorScalePlotController.cpp
    source/view/plotting/qextMvvmColorScalePlotController.h
    source/view/plotting/qextMvvmCustomPlotProxyWidget.cpp
    source/view/plotting/qextMvvmCustomPlotProxyWidget.h
    source/view/plotting/qextMvvmCustomPlotSceneAdapter.cpp
    source/view/plotting/qextMvvmCustomPlotSceneAdapter.h
    source/view/plotting/qextMvvmCustomPlotUtils.cpp
    source/view/plotting/qextMvvmCustomPlotUtils.h
    source/view/plotting/qextMvvmData1DPlotController.cpp
    source/view/plotting/qextMvvmData1DPlotController.h
    source/view/plotting/qextMvvmData2DPlotController.cpp
    source/view/plotting/qextMvvmData2DPlotController.h
    source/view/plotting/qextMvvmGraphCanvas.cpp
    source/view/plotting/qextMvvmGraphCanvas.h
    source/view/plotting/qextMvvmGraphInfoFormatter.cpp
    source/view/plotting/qextMvvmGraphInfoFormatter.h
    source/view/plotting/qextMvvmGraphPlotController.cpp
    source/view/plotting/qextMvvmGraphPlotController.h
    source/view/plotting/qextMvvmGraphViewPortPlotController.cpp
    source/view/plotting/qextMvvmGraphViewPortPlotController.h
    source/view/plotting/qextMvvmMouseMoveReporter.cpp
    source/view/plotting/qextMvvmMouseMoveReporter.h
    source/view/plotting/qextMvvmMousePosInfo.h
    source/view/plotting/qextMvvmPenController.cpp
    source/view/plotting/qextMvvmPenController.h
    source/view/plotting/qextMvvmSceneAdapterInterface.h
    source/view/plotting/qextMvvmStatusStringFormatterInterface.h
    source/view/plotting/qextMvvmStatusStringReporter.cpp
    source/view/plotting/qextMvvmStatusStringReporter.h
    source/view/plotting/qextMvvmStatusStringReporterFactory.cpp
    source/view/plotting/qextMvvmStatusStringReporterFactory.h
    source/view/plotting/qextMvvmViewPortAxisPlotController.cpp
    source/view/plotting/qextMvvmViewPortAxisPlotController.h
    source/view/widgets/qextMvvmAdjustingScrollArea.cpp
    source/view/widgets/qextMvvmAdjustingScrollArea.h
    source/view/widgets/qextMvvmAllItemsTreeView.cpp
    source/view/widgets/qextMvvmAllItemsTreeView.h
    source/view/widgets/qextMvvmCollapsibleBar.cpp
    source/view/widgets/qextMvvmCollapsibleBar.h
    source/view/widgets/qextMvvmCollapsibleListWidget.cpp
    source/view/widgets/qextMvvmCollapsibleListWidget.h
    source/view/widgets/qextMvvmItemsTreeView.cpp
    source/view/widgets/qextMvvmItemsTreeView.h
    source/view/widgets/qextMvvmItemsTreeViewInterface.h
    source/view/widgets/qextMvvmLayoutUtils.cpp
    source/view/widgets/qextMvvmLayoutUtils.h
    source/view/widgets/qextMvvmPropertyFlatView.cpp
    source/view/widgets/qextMvvmPropertyFlatView.h
    source/view/widgets/qextMvvmPropertyTreeView.cpp
    source/view/widgets/qextMvvmPropertyTreeView.h
    source/view/widgets/qextMvvmStandardTreeViews.h
    source/view/widgets/qextMvvmStatusLabel.cpp
    source/view/widgets/qextMvvmStatusLabel.h
    source/view/widgets/qextMvvmTopItemsTreeView.cpp
    source/view/widgets/qextMvvmTopItemsTreeView.h
    source/view/widgets/qextMvvmWidgetUtils.cpp
    source/view/widgets/qextMvvmWidgetUtils.h
    source/viewmodel/editors/qextMvvmBoolEditor.cpp
    source/viewmodel/editors/qextMvvmBoolEditor.h
    source/viewmodel/editors/qextMvvmColorEditor.cpp
    source/viewmodel/editors/qextMvvmColorEditor.h
    source/viewmodel/editors/qextMvvmComboPropertyEditor.cpp
    source/viewmodel/editors/qextMvvmComboPropertyEditor.h
    source/viewmodel/editors/qextMvvmCustomEditor.cpp
    source/viewmodel/editors/qextMvvmCustomEditor.h
    source/viewmodel/editors/qextMvvmCustomEventFilters.cpp
    source/viewmodel/editors/qextMvvmCustomEventFilters.h
    source/viewmodel/editors/qextMvvmDefaultEditorFactory.cpp
    source/viewmodel/editors/qextMvvmDefaultEditorFactory.h
    source/viewmodel/editors/qextMvvmDoubleEditor.cpp
    source/viewmodel/editors/qextMvvmDoubleEditor.h
    source/viewmodel/editors/qextMvvmEditorConstants.h
    source/viewmodel/editors/qextMvvmEditorBuilders.cpp
    source/viewmodel/editors/qextMvvmEditorBuilders.h
    source/viewmodel/editors/qextMvvmExternalPropertyComboEditor.cpp
    source/viewmodel/editors/qextMvvmExternalPropertyComboEditor.h
    source/viewmodel/editors/qextMvvmExternalPropertyEditor.cpp
    source/viewmodel/editors/qextMvvmExternalPropertyEditor.h
    source/viewmodel/editors/qextMvvmIntegerEditor.cpp
    source/viewmodel/editors/qextMvvmIntegerEditor.h
    source/viewmodel/editors/qextMvvmScientificDoubleEditor.cpp
    source/viewmodel/editors/qextMvvmScientificDoubleEditor.h
    source/viewmodel/editors/qextMvvmScientificSpinBox.cpp
    source/viewmodel/editors/qextMvvmScientificSpinBox.h
    source/viewmodel/editors/qextMvvmScientificSpinBoxEditor.cpp
    source/viewmodel/editors/qextMvvmScientificSpinBoxEditor.h
    source/viewmodel/editors/qextMvvmSelectableComboBoxEditor.cpp
    source/viewmodel/editors/qextMvvmSelectableComboBoxEditor.h
    source/viewmodel/editors/qextMvvmStyleUtils.cpp
    source/viewmodel/editors/qextMvvmStyleUtils.h
    source/viewmodel/factories/qextMvvmViewModelControllerBuilder.cpp
    source/viewmodel/factories/qextMvvmViewModelControllerBuilder.h
    source/viewmodel/factories/qextMvvmViewModelControllerFactory.h
    source/viewmodel/factories/qextMvvmViewModelFactory.cpp
    source/viewmodel/factories/qextMvvmViewModelFactory.h
    source/viewmodel/interfaces/qextMvvmCellDecoratorInterface.h
    source/viewmodel/interfaces/qextMvvmChildrenStrategyInterface.h
    source/viewmodel/interfaces/qextMvvmEditorFactoryInterface.h
    source/viewmodel/interfaces/qextMvvmRowStrategyInterface.h
    source/viewmodel/qextMvvmDefaultCellDecorator.cpp
    source/viewmodel/qextMvvmDefaultCellDecorator.h
    source/viewmodel/qextMvvmDefaultViewModel.cpp
    source/viewmodel/qextMvvmDefaultViewModel.h
    source/viewmodel/qextMvvmLabelDataRowStrategy.cpp
    source/viewmodel/qextMvvmLabelDataRowStrategy.h
    source/viewmodel/qextMvvmPropertiesRowStrategy.cpp
    source/viewmodel/qextMvvmPropertiesRowStrategy.h
    source/viewmodel/qextMvvmPropertyFlatViewModel.cpp
    source/viewmodel/qextMvvmPropertyFlatViewModel.h
    source/viewmodel/qextMvvmPropertyTableViewModel.cpp
    source/viewmodel/qextMvvmPropertyTableViewModel.h
    source/viewmodel/qextMvvmPropertyViewModel.cpp
    source/viewmodel/qextMvvmPropertyViewModel.h
    source/viewmodel/qextMvvmStandardChildrenStrategies.cpp
    source/viewmodel/qextMvvmStandardChildrenStrategies.h
    source/viewmodel/qextMvvmStandardViewItems.cpp
    source/viewmodel/qextMvvmStandardViewItems.h
    source/viewmodel/qextMvvmStandardViewModelControllers.cpp
    source/viewmodel/qextMvvmStandardViewModelControllers.h
    source/viewmodel/qextMvvmTopItemsViewModel.cpp
    source/viewmodel/qextMvvmTopItemsViewModel.h
    source/viewmodel/qextMvvmViewItem.cpp
    source/viewmodel/qextMvvmViewItem.h
    source/viewmodel/qextMvvmViewModel.cpp
    source/viewmodel/qextMvvmViewModel.h
    source/viewmodel/qextMvvmViewModelBase.cpp
    source/viewmodel/qextMvvmViewModelBase.h
    source/viewmodel/qextMvvmViewModelController.cpp
    source/viewmodel/qextMvvmViewModelController.h
    source/viewmodel/qextMvvmViewModelDelegate.cpp
    source/viewmodel/qextMvvmViewModelDelegate.h
    source/viewmodel/qextMvvmViewModelUtils.cpp
    source/viewmodel/qextMvvmViewModelUtils.h
    source/qextMvvmGlobal.h
    resources/qextMvvm.qrc
    PRECOMPILED_HEADER
    source/qextMvvmPch.h
    INCLUDE_DIRECTORIES
    "${CMAKE_CURRENT_SOURCE_DIR}/source"
    LIBRARIES
    qcustomplot
    PUBLIC_LIBRARIES
    ${QEXT_LIB_LINK_LIBRARIES})


#-----------------------------------------------------------------------------------------------------------------------
# Add lib examples and tests
#-----------------------------------------------------------------------------------------------------------------------
qext_add_subdirectory(examples QEXT_BUILD_EXAMPLES)
qext_add_subdirectory(tests QEXT_BUILD_TESTS)
